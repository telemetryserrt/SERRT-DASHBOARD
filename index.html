<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="globals.css" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="BB-dashboard">
    <div class="div">
      <div class="overlap">
        <div class="overlap-group">
          <div class="overlap-2">
            <div class="ailiz">Ailiz &lt;3</div>
            <div class="top-bar">
              <div class="overlap-group-2">
                <div class="hour">
                  <div class="text-wrapper">7:30</div>
                </div>
                <div class="date">
                  <div class="text-wrapper-2">09/27/2023</div>
                </div>
              </div>
            </div>
            <div class="dashboard-indicators">
              <img class="low-beam-headlights" src="img/low-beam-headlights.svg" />
              <div class="lights">
                <div class="overlap-group-3">
                  <img class="shape" src="img/shape-1.svg" />
                  <div class="text-wrapper-3">AUTO</div>
                </div>
              </div>
              <div class="parking-lights"><img class="img" src="img/shape.svg" /></div>
              <img class="low-beam-headlights-2" src="img/low-beam-headlights.svg" />
            </div>
          </div>
          <div class="MPH">
            <div class="overlap-3">
              <div class="text-wrapper-4">35</div>
              <div class="text-wrapper-5">MPH</div>
              <div class="o-v-bar"><img class="range-bar" src="img/range-bar.svg" /></div>
            </div>
          </div>
          <div class="right-side-analytics">
            <div class="average-mpkW">
              <div class="overlap-group-4">
                <div class="element-mpge">100 mpkW</div>
                <div class="text-wrapper-6">Avg. mpkW</div>
              </div>
              <img class="sun" src="img/sun.svg" />
            </div>
            <div class="optimal-velocity">
              <div class="overlap-group-4">
                <div class="element-optvel"> <em>34</em> mph</div>
                <div class="text-wrapper-6">Optimal Velociy</div>
              </div>
              <img class="sun" src="img/speedometer-svgrepo-com.svg" />
            </div>
            <div class="range">
              <div class="text-wrapper-7">188 km</div>
              <div class="text-wrapper-8">Range</div>
              <div class="road-icon">
                <img class="rectangle" src="img/rectangle-97.svg" />
                <img class="rectangle-2" src="img/rectangle-98.svg" />
                <div class="rectangle-3"></div>
                <div class="rectangle-4"></div>
                <div class="rectangle-5"></div>
              </div>
            </div>
          </div>
          <img class="arrows" src="img/arrows.png" />
        </div>
        <img class="road" src="img/road.png" />
        <div class="overlap-4">
          <div class="bottom-left">
            <div class="temperature">
              <p class="element-f"><span class="span">98 </span> <span class="text-wrapper-9">Â°F</span></p>
            </div>
            <div class="o-v">
              <div class="text-wrapper-10"><em>34</em> mph</div>
            </div>
          </div>
          <div class="battery-charge">
            <div class="overlap-5">
              <div class="text-wrapper-11">Battery charge</div>
              <img class="battery-ring" src="img/battery-ring.svg" />
              <div class="text-wrapper-12">97%</div>
            </div>
            <div class="charge">
              <div class="rectangle-6"></div>
              <div class="rectangle-7"></div>
              <div class="rectangle-8"></div>
              <div class="rectangle-9"></div>
              <div class="rectangle-10"></div>
              <div class="rectangle-11"></div>
              <div class="rectangle-12"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="gear-selection">
        <div class="ready">READY</div>
        <div class="text-wrapper-13">R</div>
        <div class="text-wrapper-14">N</div>
        <div class="text-wrapper-15">D</div>
      </div>
    </div>
  </div>
  <script>
    // Function to update velocity (text-wrapper-4) gradually
    function updateVelocity() {
      var currentVelocity = parseFloat(document.querySelector(".text-wrapper-4").textContent);
      var targetVelocity = Math.floor(Math.random() * 100); // Generate a random target velocity
      var step = 1; // Adjust the step size for the transition speed

      // Gradually transition to the target velocity
      if (targetVelocity > currentVelocity) {
        currentVelocity = Math.min(currentVelocity + step, targetVelocity);
      } else if (targetVelocity < currentVelocity) {
        currentVelocity = Math.max(currentVelocity - step, targetVelocity);
      }

      // Update the HTML element with the current velocity
      document.querySelector(".text-wrapper-4").textContent = currentVelocity;
    }

    // Function to update battery charge (text-wrapper-12) gradually
    function updateBatteryCharge() {
      var currentCharge = parseInt(document.querySelector(".text-wrapper-12").textContent);
      var step = 1; // Adjust the step size for the transition speed

      // Gradually decrease the battery charge (simulate discharging)
      if (currentCharge > 0) {
        currentCharge = Math.max(currentCharge - step, 0);
      }

      // Update the HTML element with the current battery charge
      document.querySelector(".text-wrapper-12").textContent = currentCharge + "%";
    }

    function updateOptimalVelocity() {
      var currentOptimalVelocity = parseFloat(document.querySelector(".element-optvel").querySelector("em").textContent);
      var targetOptimalVelocity = Math.floor(Math.random() * 100); // Generate a random target velocity
      var step = 1; // Adjust the step size for the transition speed

      // Gradually transition to the target velocity
      if (targetOptimalVelocity > currentOptimalVelocity) {
        currentOptimalVelocity = Math.min(currentOptimalVelocity + step, targetOptimalVelocity);
      } else if (targetOptimalVelocity < currentOptimalVelocity) {
        currentOptimalVelocity = Math.max(currentOptimalVelocity - step, targetOptimalVelocity);
      }

      // Update the HTML element with the current velocity
      document.querySelector(".element-optvel").querySelector('em').textContent = currentOptimalVelocity;
      document.querySelector(".text-wrapper-10").querySelector('em').textContent = currentOptimalVelocity;
    }

    function updateRangeColor(){
      var range_bar = document.querySelector(".range-bar");
      var currentVelocity = document.querySelector(".text-wrapper-4");
      var currentVelocityNumber = parseFloat(document.querySelector(".text-wrapper-4").textContent);
      var currentOptimalVelocity = parseFloat(document.querySelector(".element-optvel").querySelector("em").textContent);

      if (currentVelocityNumber > currentOptimalVelocity + 5 || currentVelocityNumber < currentOptimalVelocity - 5) {
        range_bar.src = 'img/range-bar-r.svg'
        currentVelocity.style.color = '#ea0000';
      } else if (currentVelocityNumber > currentOptimalVelocity + 3 || currentVelocityNumber < currentOptimalVelocity - 3) {
        range_bar.src = 'img/range-bar-y.svg';
        currentVelocity.style.color = '#ead700';
      } else {
        range_bar.src = 'img/range-bar.svg';
        currentVelocity.style.color = '#01EB7B';
      }
    }

    //TODO: Update battery color based on charge
    function updateBatteryColor() {
      var battery_ring = document.querySelector(".battery-ring");
      var currentCharge = parseInt(document.querySelector(".text-wrapper-12").textContent);

      if (currentCharge > 90) {
        battery_ring.src = 'img/battery-ring.svg';
      } else if (currentCharge > 80) {
        battery_ring.src = 'img/battery-ring-y.svg';
      } else {  
        battery_ring.src = 'img/battery-ring-r.svg';
      }
    }

    function updateDate() {
      var date = new Date();
      var hour = date.getHours();
      var minute = date.getMinutes();
      var day = date.getDate();
      var month = date.getMonth() + 1;
      var year = date.getFullYear();

      document.querySelector(".text-wrapper").textContent = hour + ":" + minute;
      document.querySelector(".text-wrapper-2").textContent = month + "/" + day + "/" + year;
    }


    // Call the updateValues function initially
    updateVelocity();
    updateBatteryCharge();
    updateOptimalVelocity();
    updateRangeColor();
    updateDate();

    // Set intervals to update values gradually every second
    setInterval(updateDate, 1000);
    setInterval(updateVelocity, 1000);
    setInterval(updateRangeColor, 1000);
    setInterval(updateBatteryCharge, 4000); // Change every 4 seconds for battery charge
    setInterval(updateOptimalVelocity, 4000); // Change every 4 seconds for optimal velocity
  </script>
</body>

</html>